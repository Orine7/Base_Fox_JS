"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createPackageJson = void 0;
const tslib_1 = require("tslib");
const devkit_1 = require("@nrwl/devkit");
const devkit_2 = require("@nrwl/devkit");
const create_package_json_1 = require("@nrwl/workspace/src/utilities/create-package-json");
function createPackageJson(options, context) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const depGraph = (0, devkit_2.readCachedProjectGraph)();
        const packageJson = (0, create_package_json_1.createPackageJson)(context.projectName, depGraph, {
            root: context.root,
            projectRoot: context.workspace.projects[context.projectName].sourceRoot,
        });
        if (!packageJson.scripts) {
            packageJson.scripts = {};
        }
        packageJson.scripts.start = 'next start';
        if (!packageJson.devDependencies) {
            packageJson.devDependencies = {};
        }
        const nrwlWorkspaceNode = depGraph.externalNodes['npm:@nrwl/workspace'];
        if (nrwlWorkspaceNode) {
            packageJson.dependencies['@nrwl/workspace'] =
                nrwlWorkspaceNode.data.version;
        }
        const typescriptNode = depGraph.externalNodes['npm:typescript'];
        if (typescriptNode) {
            packageJson.dependencies['typescript'] = typescriptNode.data.version;
        }
        (0, devkit_1.writeJsonFile)(`${options.outputPath}/package.json`, packageJson);
    });
}
exports.createPackageJson = createPackageJson;
//# sourceMappingURL=create-package-json.js.map